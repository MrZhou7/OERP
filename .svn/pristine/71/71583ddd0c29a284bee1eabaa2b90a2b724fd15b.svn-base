(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cb25"],{"3tdr":function(e,t,l){},Tu6A:function(e,t,l){"use strict";var a=l("3tdr");l.n(a).a},"gDS+":function(e,t,l){e.exports={default:l("oh+g"),__esModule:!0}},"oh+g":function(e,t,l){var a=l("WEpk"),r=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},uMX6:function(e,t,l){"use strict";l.r(t);var a=l("gDS+"),r=l.n(a),i={name:"addSite",data:function(){return{mall_name:"",building_name:"",floor_name:"",ruleForm:{mall_id:"",building_id:"",floor_id:"",unit_type:"",merchant_type_id:"",operate_area_id:"",note:"",siteList:[{building_area:"",unit_code:""}]},rules:{mall_id:[{required:!0,message:"请选择项目名称",trigger:"change"}],building_id:[{required:!0,message:"请选择所属楼栋",trigger:"change"}],floor_id:[{required:!0,message:"请选择所属楼层",trigger:"change"}],unit_type:[{required:!0,message:"请选择资源类别",trigger:"change"}],merchant_type_id:[{required:!0,message:"请选择场地类型",trigger:"change"}],operate_area_id:[{required:!0,message:"请选择经营区域",trigger:"change"}]}}},methods:{removeRow:function(e){this.ruleForm.siteList.splice(e,1)},addRow:function(){this.ruleForm.siteList.push({building_area:"",unit_code:""})},getSiteData:function(){var e=this;this.axios({method:"post",url:"http://10.1.200.85/v1/mall_info/getAllMall"}).then(function(t){e.mall_name=t.data.data})},getBuild:function(e){var t=this;this.ruleForm.floor_id="",this.ruleForm.building_id="";var l={mall_id:e};this.axios({method:"post",data:l,url:"http://10.1.200.85/v1/building_info/getAllBuild"}).then(function(e){t.building_name=e.data.data})},getFloor:function(e){var t=this;this.ruleForm.floor_id="";var l={building_id:e};this.axios({method:"post",data:l,url:"http://10.1.200.85/v1/floor_info/getAllFloor"}).then(function(e){t.floor_name=e.data.data})},saveForm:function(e){var t=this;console.log(this.ruleForm),this.$refs[e].validate(function(e){e?t.axios({method:"post",data:{ruleForm:r()(t.ruleForm)},url:"http://10.1.200.85/v1/property_unit/addUnit"}).then(function(e){t.$router.push({path:"/business/siteManage"}),t.$message({message:"新增成功",type:"success"})}):t.$message({message:"请完善信息！！！",type:"warning"})})},cancle:function(){this.$router.go(-1)}},created:function(){this.getSiteData()}},o=(l("Tu6A"),l("KHd+")),n=Object(o.a)(i,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"addSiteWrap"},[l("div",{staticClass:"siteStyle"},[e._v("新增场地")]),e._v(" "),l("blockquote",{staticClass:"topTitle"},[e._v("基本信息")]),e._v(" "),l("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"门店名称",prop:"mall_id"}},[l("el-col",{attrs:{span:6}},[l("el-select",{attrs:{placeholder:"请选择活动区域"},on:{change:e.getBuild},model:{value:e.ruleForm.mall_id,callback:function(t){e.$set(e.ruleForm,"mall_id",t)},expression:"ruleForm.mall_id"}},e._l(e.mall_name,function(e,t){return l("el-option",{key:t,attrs:{label:e.mall_name,value:e.mall_id}})}))],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"所属楼栋",prop:"building_id"}},[l("el-col",{attrs:{span:6}},[l("el-select",{attrs:{placeholder:"请选择所属楼栋"},on:{change:e.getFloor},model:{value:e.ruleForm.building_id,callback:function(t){e.$set(e.ruleForm,"building_id",t)},expression:"ruleForm.building_id"}},e._l(e.building_name,function(e,t){return l("el-option",{key:t,attrs:{label:e.building_name,value:e.building_id}})}))],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"所属楼层",prop:"floor_id"}},[l("el-col",{attrs:{span:6}},[l("el-select",{attrs:{placeholder:"请选择所属楼层"},model:{value:e.ruleForm.floor_id,callback:function(t){e.$set(e.ruleForm,"floor_id",t)},expression:"ruleForm.floor_id"}},e._l(e.floor_name,function(e,t){return l("el-option",{key:t,attrs:{label:e.floor_name,value:e.floor_id}})}))],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"资源类别",prop:"unit_type"}},[l("el-col",{attrs:{span:6}},[l("el-select",{attrs:{placeholder:"请选择资源类别"},model:{value:e.ruleForm.unit_type,callback:function(t){e.$set(e.ruleForm,"unit_type",t)},expression:"ruleForm.unit_type"}},[l("el-option",{attrs:{label:"商铺",value:"1"}}),e._v(" "),l("el-option",{attrs:{label:"仓库",value:"2"}}),e._v(" "),l("el-option",{attrs:{label:"广告位",value:"3"}}),e._v(" "),l("el-option",{attrs:{label:"商铺外摆",value:"4"}}),e._v(" "),l("el-option",{attrs:{label:"展位",value:"5"}})],1)],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"场地类型",prop:"merchant_type_id"}},[l("el-col",{attrs:{span:6}},[l("el-select",{attrs:{placeholder:"请选择场地类型"},model:{value:e.ruleForm.merchant_type_id,callback:function(t){e.$set(e.ruleForm,"merchant_type_id",t)},expression:"ruleForm.merchant_type_id"}},[l("el-option",{attrs:{label:"户外场地",value:"1"}}),e._v(" "),l("el-option",{attrs:{label:"室内场地",value:"2"}})],1)],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"经营区域",prop:"operate_area_id"}},[l("el-col",{attrs:{span:6}},[l("el-select",{attrs:{placeholder:"请选择经营区域"},model:{value:e.ruleForm.operate_area_id,callback:function(t){e.$set(e.ruleForm,"operate_area_id",t)},expression:"ruleForm.operate_area_id"}},[l("el-option",{attrs:{label:"户外场地",value:"1"}}),e._v(" "),l("el-option",{attrs:{label:"室内场地",value:"2"}})],1)],1)],1),e._v(" "),l("el-form-item",{attrs:{label:"备注"}},[l("el-col",{attrs:{span:6}},[l("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.note,callback:function(t){e.$set(e.ruleForm,"note",t)},expression:"ruleForm.note"}})],1)],1),e._v(" "),l("blockquote",{staticClass:"topTitle"},[e._v("面积信息")]),e._v(" "),e._l(e.ruleForm.siteList,function(t,a){return l("el-row",{key:a,staticStyle:{"margin-bottom":"10px"}},[l("el-col",{attrs:{span:2}},[l("div",{staticClass:"siteNav"},[l("span",[e._v("*")]),e._v("场地")])]),e._v(" "),l("el-col",{staticClass:"field-border",attrs:{span:16}},[l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"场地编号",prop:"siteList."+a+".unit_code",rules:[{required:!0,message:"场地编号不能为空",trigger:"change"},{max:10,message:"不超过10个字符",trigger:"change"}]}},[l("el-input",{attrs:{placeholder:"英文、数字、限10个字符"},model:{value:t.unit_code,callback:function(l){e.$set(t,"unit_code",l)},expression:"item.unit_code"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:10}},[l("el-form-item",{attrs:{label:"测量面积",prop:"siteList."+a+".building_area",rules:[{required:!0,message:"计租面积不能为空",trigger:"change"}]}},[l("el-input",{attrs:{autocomplete:"off",placeholder:"数字保留两位小数"},model:{value:t.building_area,callback:function(l){e.$set(t,"building_area",l)},expression:"item.building_area"}})],1)],1)],1),e._v(" "),l("el-col",{attrs:{span:2}},[l("div",{staticClass:"siteNav"},[e.ruleForm.siteList.length>1?l("el-button",{attrs:{type:"danger",size:"medium"},on:{click:function(t){e.removeRow(a)}}},[e._v("\n            删除\n          ")]):e._e()],1)])],1)}),e._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addRow}},[e._v("新增场地")])],1),e._v(" "),l("el-form-item",{staticStyle:{padding:"10px 0","background-color":"#f2f2f2","text-align":"center"}},[l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveForm("ruleForm")}}},[e._v("保存")]),e._v(" "),l("el-button",{on:{click:function(t){e.cancle()}}},[e._v("取消")])],1)],2)],1)},[],!1,null,"12157740",null);n.options.__file="addSite.vue";t.default=n.exports}}]);