(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5452"],{"/dDj":function(a,e,t){"use strict";var r=t("8VAk");t.n(r).a},"8VAk":function(a,e,t){},Njh7:function(a,e,t){"use strict";t.r(e);var r={name:"edit",data:function(){return{filterText:"",dialogVisible:!1,dataTree:[],operationData:"",defaultProps:{children:"children",label:"text"},editTableData:{brand_name:"",brand_code:"",operation_type:"",brand_rank:"",brand_desc:"",operation_type_id:"",logo:"",brand_id:""},imageUrl:"",rules:{brand_name:[{required:!0,message:"中英文、数字、限20字符",trigger:"blur"},{min:0,max:20,message:"长度在20字符以内",trigger:"blur"}],operation_type:[{required:!0,message:"请选择品类",trigger:"change"}],brand_rank:[{required:!0,message:"请选择品牌等级",trigger:"change"}],brand_desc:[{required:!0,message:"请填写说明",trigger:"change"}]}}},watch:{filterText:function(a){this.$refs.tree2.filter(a)}},methods:{filterNode:function(a,e){return!a||-1!==e.text.indexOf(a)},gttOperation:function(){var a=this;this.dialogVisible=!0,this.axios({method:"post",url:"http://10.1.200.85/v1/Operation_Type/cateList"}).then(function(e){a.dataTree=e.data.data})},handleNodeClick:function(a,e){this.operationData=e.data.data.type_name,this.editTableData.operation_type_id=e.data.data.operation_type_id},passDate:function(){this.dialogVisible=!1,this.editTableData.operation_type=this.operationData},submitForm:function(a){var e=this;this.$refs[a].validate(function(a){if(!a)return console.log("error submit!!"),!1;var t={brand_type:1,brand_desc:e.editTableData.brand_desc,brand_name:e.editTableData.brand_name,logo:e.editTableData.logo?e.editTableData.logo:"",operation_type:e.editTableData.operation_type_id,brand_rank:e.editTableData.brand_rank,brand_id:e.editTableData.brand_id};e.axios({method:"post",data:t,url:"http://10.1.200.85/v1/brand_info/editBrand"}).then(function(a){e.$router.push({path:"/brand/brand"}),e.$message({message:"提交修改成功",type:"success"})})})},cancle:function(){this.$router.go(-1)},getFile:function(a,e){var t=this,r=new FormData;r.append("logo",a.raw),this.axios({method:"post",data:r,url:"http://10.1.200.85/v1/brand_info/uploadsLogo"}).then(function(a){t.editTableData.logo=a.data.data,t.imageUrl="http://10.1.200.85/"+a.data.data})},beforeAvatarUpload:function(a){var e="image/jpeg"===a.type,t=a.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&t},getEditBrand:function(){var a=this,e={brand_id:this.$route.query.editBrandId};this.axios({method:"post",data:e,url:"http://10.1.200.85/v1/brand_info/getBrandInfo"}).then(function(e){a.editTableData=e.data.data,a.imageUrl="http://10.1.200.85/"+e.data.data.logo})}},created:function(){this.getEditBrand()}},i=(t("/dDj"),t("KHd+")),l=Object(i.a)(r,function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{attrs:{id:"editBrandWrap"}},[t("div",{staticClass:"siteStyle"},[a._v("编辑品牌")]),a._v(" "),t("blockquote",{staticClass:"topTitle"},[a._v("品牌信息")]),a._v(" "),t("el-form",{ref:"editTableData",staticClass:"demo-ruleForm",attrs:{model:a.editTableData,rules:a.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"品牌名称",prop:"brand_name"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{placeholder:"中英文、数字、限20字以内",disabled:""},model:{value:a.editTableData.brand_name,callback:function(e){a.$set(a.editTableData,"brand_name",e)},expression:"editTableData.brand_name"}})],1)],1),a._v(" "),t("el-form-item",{attrs:{label:"品牌编号",prop:"brand_code"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{placeholder:"品牌信息保存后自动生成",disabled:""},model:{value:a.editTableData.brand_code,callback:function(e){a.$set(a.editTableData,"brand_code",e)},expression:"editTableData.brand_code"}})],1)],1),a._v(" "),t("el-form-item",{attrs:{label:"品类选择",prop:"operation_type"}},[t("el-col",{staticClass:"getPointer",attrs:{span:8}},[t("el-input",{attrs:{placeholder:"请选择品类","suffix-icon":"el-icon-search"},nativeOn:{click:function(e){return a.gttOperation(e)}},model:{value:a.editTableData.type_name,callback:function(e){a.$set(a.editTableData,"type_name",e)},expression:"editTableData.type_name"}})],1)],1),a._v(" "),t("el-form-item",{attrs:{label:"品牌等级",prop:"brand_rank"}},[t("el-col",{attrs:{span:8}},[t("el-select",{attrs:{placeholder:"请选择品牌等级"},model:{value:a.editTableData.brand_rank,callback:function(e){a.$set(a.editTableData,"brand_rank",e)},expression:"editTableData.brand_rank"}},[t("el-option",{attrs:{label:"A",value:"A"}}),a._v(" "),t("el-option",{attrs:{label:"B",value:"B"}}),a._v(" "),t("el-option",{attrs:{label:"C",value:"C"}})],1)],1)],1),a._v(" "),t("el-form-item",{attrs:{label:"品牌logo",prop:"logo"}},[t("el-col",{attrs:{span:3}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"11","show-file-list":!1,"on-change":a.getFile,"auto-upload":!1,"before-upload":a.beforeAvatarUpload}},[a.imageUrl?t("img",{staticClass:"avatar",attrs:{src:a.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a._v(" "),t("el-form-item",[t("el-col",{attrs:{span:20}},[t("span",{staticStyle:{color:"lightslategrey"}},[a._v("建议尺寸:100*100像素, 格式为jpg、png、jpeg图片, 不大于500kb")])])],1),a._v(" "),t("el-form-item",{attrs:{label:"品牌说明",placeholder:"请输入品牌说明，300字以内",prop:"brand_desc"}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{type:"textarea"},model:{value:a.editTableData.brand_desc,callback:function(e){a.$set(a.editTableData,"brand_desc",e)},expression:"editTableData.brand_desc"}})],1)],1),a._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(e){a.submitForm("editTableData")}}},[a._v("保存")]),a._v(" "),t("el-button",{on:{click:function(e){a.cancle("editTableData")}}},[a._v("取消")])],1)],1),a._v(" "),t("el-dialog",{attrs:{title:"选择品类",visible:a.dialogVisible,"close-on-click-modal":!1,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(e){a.dialogVisible=e}}},[t("el-input",{attrs:{placeholder:"输入关键字进行品类搜索"},model:{value:a.filterText,callback:function(e){a.filterText=e},expression:"filterText"}}),a._v(" "),t("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{data:a.dataTree,props:a.defaultProps,"default-expand-all":"","filter-node-method":a.filterNode},on:{"node-click":a.handleNodeClick}}),a._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){a.dialogVisible=!1}}},[a._v("取 消")]),a._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:a.passDate}},[a._v("确 定")])],1)],1)],1)},[],!1,null,"0961dad8",null);l.options.__file="editBrand.vue";e.default=l.exports}}]);