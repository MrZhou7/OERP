(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e26f"],{EGpC:function(e,t,a){"use strict";a.r(t);var r={name:"addBrand",data:function(){return{filterText:"",dialogVisible:!1,dataTree:[],operationData:"",defaultProps:{children:"children",label:"text"},ruleForm:{brand_name:"",brand_code:"",operation_type:"",brand_rank:"",brand_desc:"",operation_type_id:"",logo:""},imageUrl:"",dialogVisiblePic:!1,rules:{brand_name:[{required:!0,message:"中英文、数字、限20字符",trigger:"blur"},{min:0,max:20,message:"长度在20字符以内",trigger:"blur"}],operation_type:[{required:!0,message:"请选择品类",trigger:"change"}],brand_rank:[{required:!0,message:"请选择品牌等级",trigger:"change"}],brand_desc:[{required:!0,message:"请填写说明",trigger:"change"}]}}},watch:{filterText:function(e){this.$refs.tree2.filter(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.text.indexOf(e)},gttOperation:function(){var e=this;this.dialogVisible=!0,this.axios({method:"post",url:"http://10.1.200.85/v1/Operation_Type/cateList"}).then(function(t){e.dataTree=t.data.data})},handleNodeClick:function(e,t){this.operationData=t.data.data.type_name,this.ruleForm.operation_type_id=t.data.data.operation_type_id},passDate:function(){this.dialogVisible=!1,this.ruleForm.operation_type=this.operationData},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a={brand_type:1,brand_desc:t.ruleForm.brand_desc,brand_name:t.ruleForm.brand_name,logo:t.ruleForm.logo?t.ruleForm.logo:"",operation_type:t.ruleForm.operation_type_id,brand_rank:t.ruleForm.brand_rank};t.axios({method:"post",data:a,url:"http://10.1.200.85/v1/brand_info/addBrand"}).then(function(e){t.$router.push({path:"/brand/brand"}),t.$message({message:"提交审核成功",type:"success"})})})},resetForm:function(e){this.$refs[e].resetFields()},cancle:function(){this.$router.go(-1)},getFile:function(e,t){var a=this,r=new FormData;r.append("logo",e.raw),this.axios({method:"post",data:r,url:"http://10.1.200.85/v1/brand_info/uploadsLogo"}).then(function(e){a.ruleForm.logo=e.data.data,a.imageUrl="http://10.1.200.85/"+e.data.data})},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}}},o=(a("dYPm"),a("KHd+")),l=Object(o.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"addBrandWrap"}},[a("div",{staticClass:"siteStyle"},[e._v("新增品牌")]),e._v(" "),a("blockquote",{staticClass:"topTitle"},[e._v("品牌信息信息")]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"品牌名称",prop:"brand_name"}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"中英文、数字、限20字以内"},model:{value:e.ruleForm.brand_name,callback:function(t){e.$set(e.ruleForm,"brand_name",t)},expression:"ruleForm.brand_name"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌编号",prop:"brand_code"}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"品牌信息保存后自动生成",disabled:""},model:{value:e.ruleForm.brand_code,callback:function(t){e.$set(e.ruleForm,"brand_code",t)},expression:"ruleForm.brand_code"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"品类选择",prop:"operation_type"}},[a("el-col",{staticClass:"getPointer",attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请选择品类","suffix-icon":"el-icon-search"},nativeOn:{click:function(t){return e.gttOperation(t)}},model:{value:e.ruleForm.operation_type,callback:function(t){e.$set(e.ruleForm,"operation_type",t)},expression:"ruleForm.operation_type"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌等级",prop:"brand_rank"}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"请选择品牌等级"},model:{value:e.ruleForm.brand_rank,callback:function(t){e.$set(e.ruleForm,"brand_rank",t)},expression:"ruleForm.brand_rank"}},[a("el-option",{attrs:{label:"A",value:"A"}}),e._v(" "),a("el-option",{attrs:{label:"B",value:"B"}}),e._v(" "),a("el-option",{attrs:{label:"C",value:"C"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌logo",prop:"logo"}},[a("el-col",{attrs:{span:3}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"11","show-file-list":!1,"on-change":e.getFile,"auto-upload":!1,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),a("el-form-item",[a("el-col",{attrs:{span:20}},[a("span",{staticStyle:{color:"lightslategrey"}},[e._v("建议尺寸:100*100像素, 格式为jpg、png、jpeg图片, 不大于500kb")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌说明",placeholder:"请输入品牌说明，300字以内",prop:"brand_desc"}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.brand_desc,callback:function(t){e.$set(e.ruleForm,"brand_desc",t)},expression:"ruleForm.brand_desc"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交审核")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.cancle("ruleForm")}}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择品类",visible:e.dialogVisible,"close-on-click-modal":!1,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-input",{attrs:{placeholder:"输入关键字进行品类搜索"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{data:e.dataTree,props:e.defaultProps,"default-expand-all":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.passDate}},[e._v("确 定")])],1)],1)],1)},[],!1,null,"2803c866",null);l.options.__file="addBrand.vue";t.default=l.exports},dYPm:function(e,t,a){"use strict";var r=a("gbd5");a.n(r).a},gbd5:function(e,t,a){}}]);